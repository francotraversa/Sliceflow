root = "."
testdata_dir = "testdata"
tmp_dir = "tmp"

[build]
  # Comando de compilación simple y directo para evitar errores de pipes en Windows
  cmd = "go build -o ./tmp/main.exe ./cmd/api/main.go"
  bin = "tmp/main.exe"
  
  # Directorios que Air debe vigilar (Aseguramos que incluya la raíz y subcarpetas)
  include_dir = ["cmd", "internal", "pkg"]
  
  # Extensiones que disparan el reinicio
  include_ext = ["go", "tpl", "tmpl", "html", "toml", "yaml"]
  
  # Directorios a ignorar (VITAL: ignorar tmp para evitar bucles infinitos)
  exclude_dir = ["assets", "tmp", "vendor", "testdata", "docs"]
  
  # Retraso para que Windows termine de escribir archivos antes de compilar
  delay = 1000
  
  # Detener el proceso viejo si el nuevo falla al compilar
  stop_on_error = true
  
  # Matar el proceso si se cuelga
  kill_delay = "500ms"

[log]
  time = true
  main_only = false

[color]
  main = "magenta"
  watcher = "cyan"
  build = "yellow"
  runner = "green"

[misc]
  # Limpiar la carpeta tmp al salir
  clean_on_exit = true